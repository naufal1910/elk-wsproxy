{
    "index_patterns": ["wsproxy-*"],
    "template": {
      "settings": {
        "index": {
          "number_of_shards": 1,
          "number_of_replicas": 0,
          "codec": "best_compression"
        }
      },
      "mappings": {
        "dynamic": true,
        "dynamic_templates": [
          {
            "headers_to_keyword": {
              "path_match": "http.request.headers.*",
              "mapping": { "type": "keyword", "ignore_above": 256 }
            }
          },
          {
            "req_strings_keyword": {
              "path_match": "request.*",
              "match_mapping_type": "string",
              "mapping": { "type": "keyword", "ignore_above": 512 }
            }
          },
          {
            "resp_strings_keyword": {
              "path_match": "response.*",
              "match_mapping_type": "string",
              "mapping": { "type": "keyword", "ignore_above": 512 }
            }
          }
        ],
        "properties": {
          "@timestamp": { "type": "date" },
          "message": { "type": "text" },
          "event": { "properties": { "action": { "type": "keyword" } } },
          "log": {
            "properties": {
              "level": { "type": "keyword" },
              "logger": { "type": "keyword" }
            }
          },
          "process": {
            "properties": {
              "thread": { "properties": { "name": { "type": "keyword" } } }
            }
          },
          "http": {
            "properties": {
              "request": {
                "properties": {
                  "headers": { "type": "object", "dynamic": true }
                }
              }
            }
          },
          "response": {
            "properties": {
              "responseCode": { "type": "keyword" },
              "success": { "type": "boolean" },
              "errorMessage": {
                "type": "text",
                "fields": { "keyword": { "type": "keyword", "ignore_above": 256 } }
              }
            }
          },
          "request": { "type": "object", "dynamic": true },
          "request_hash": { "type": "object", "dynamic": true },
          "service": { "properties": { "name": { "type": "keyword" } } },
          "env": { "type": "keyword" }
        }
      }
    },
    "priority": 500
  }
  